<!doctype html>
<html>
<head>
<meta charset="utf-8">
</head>
<body>
<div id="monitor"><h1>Connecting...</h1></div><br>
<div id="info"></div><br>
<div id="smart"></div>
<script src="jbog_client.js"></script>
<script>
function $(element) {
  return document.querySelector(element);
}

function main() {
  function update_monitor(hw) {
    $("#monitor").innerHTML = JSON.stringify(hw, undefined, 2);
  }

  function update_info(hw) {
    $("#info").innerHTML = JSON.stringify(hw, undefined, 2);
  }

  function update_smart(hw) {
    $("#smart").innerHTML = JSON.stringify(hw, undefined, 2);
  }

  var jbog = jbog_client.make();

  jbog.on("open", function (data) {
    jbog.repeat_message("get_sensors");
    jbog.send_message("get_devices");
    jbog.on("sensors", update_monitor);
    jbog.on("devices", update_info);

    jbog.send_message("set_plugin_effect", {
      name: "monitor_0",
      data: {
        is_on: 1,
        sensor_type: "cpu_temp",
        start_value: 20,
        end_value: 60,
        start_color: { r: 0, g: 255, b: 0 },
        end_color: { r: 255, g: 0, b: 0 }
      }
    });
  });

  jbog.run("127.0.0.1", 8000);
}

main();

</script>
</body>
</html>
